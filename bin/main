#!/usr/bin/env php
<?php

//  Autoloader
spl_autoload_register(function ($sClassName) {

    //  Prep the class name
    if (substr($sClassName,0, 13) == 'ServerBackup\\') {
        $sClass = substr($sClassName, 13);
    } else {
        $sClass = $sClassName;
    }

    //  Replace slashes
    $sClass = str_replace('\\', DIRECTORY_SEPARATOR, $sClass);

    $sPath = __DIR__ . '/../src/' . $sClass . '.php';
    if (file_exists($sPath)) {
        require $sPath;
    } else {
        throw new \Exception($sClassName . ' is not a valid class (tried to load from ' . $sPath . ')');
    }
});

$oApp = new ServerBackup\App($argv);
$oApp->go();
